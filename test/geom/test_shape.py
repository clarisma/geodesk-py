"""
Tests to ensure that GeoDesk fucntions are compatible with Shapely
"""

from shapely import *
from geodesk import *

def test_polygon_construction():
    p = Polygon(lonlat([11.5344324252,48.0253348519],[11.3205653159,48.1310327804],[11.5022058515,48.2384650123],[11.5988857402,48.2579739524],[11.5857021799,48.17598645],[11.7233972354,48.1329881846],[11.7497646911,48.0478628532],[11.5344324252,48.0253348519]))
    p2 = from_mercator(p)
    p3 = Polygon([[11.5344324252,48.0253348519],[11.3205653159,48.1310327804],[11.5022058515,48.2384650123],[11.5988857402,48.2579739524],[11.5857021799,48.17598645],[11.7233972354,48.1329881846],[11.7497646911,48.0478628532],[11.5344324252,48.0253348519]])
    # print(p2.wkt)
    # print(p3.wkt)
    assert p2.equals_exact(p3, tolerance=0.00000005)
    # assert p2.wkt == "POLYGON (11.5344324 48.0253349, 11.3205653 48.1310328, 11.5022059 48.238465, 11.5988857 48.257974, 11.5857022 48.1759864, 11.7233972 48.1329882, 11.7497647 48.0478629, 11.5344324 48.0253349)"    

